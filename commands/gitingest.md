**Purpose**: Git repository analysis and markdown digest generation for LLM ingestion using GitHub MCP tools

---

@include shared/universal-constants.yml#Universal_Legend

## Command Execution
Execute: immediate. --plan‚Üíshow plan first
Legend: Generated based on symbols used in command
Purpose: "[Action][Subject] - Analyze GitHub repository and create markdown digest"

Analyze GitHub repositories using native MCP Docker GitHub tools and create LLM-optimized markdown digests automatically saved to your Obsidian vault.

@include shared/flag-inheritance.yml#Universal_Always

## Usage

```
/gitingest <github-url> [options]
```

**Examples:**
- `/gitingest https://github.com/user/repo` - Analyze public GitHub repo
- `/gitingest https://github.com/user/private-repo` - Analyze private repo (uses your authenticated credentials)
- `/gitingest https://github.com/user/repo --branch feature-branch` - Analyze specific branch
- `/gitingest https://github.com/user/repo --focus code` - Focus on code files only

## Parameters

**Required:**
- `<github-url>`: Full GitHub repository URL (e.g., https://github.com/owner/repo)

**Optional:**
- `--branch <name>`: Specific branch to analyze (default: repo's default branch)
- `--focus <mode>`: Analysis focus mode
  - `code`: Code files only (*.js, *.py, *.ts, *.go, *.java, etc.)
  - `docs`: Documentation only (*.md, *.txt, *.rst, etc.)
  - `config`: Configuration files (*.json, *.yml, *.toml, Dockerfile, etc.)
  - `all`: All files (default)

## Implementation Details

**This command uses MCP Docker GitHub tools:**
1. **Repository Access**: `mcp__MCP_DOCKER__get_file_contents` to browse repository
2. **File Reading**: Recursive file tree traversal
3. **Content Extraction**: Direct file content retrieval from GitHub API
4. **Metadata Collection**: Repository info, commits, branches

**Authentication:**
- Uses your existing GitHub credentials configured in MCP Docker
- Works with both public and private repositories
- No additional token setup required

**Output:**
- Auto-saves to: `/Users/zorro/Documents/Obsidian/Claudecode/`
- Filename format: `YYYY-MM-DD-<repo-name>-repository-analysis.md`
- Includes frontmatter with tags, metadata, and classification

## Analysis Process

The command will:

1. **Parse GitHub URL** to extract owner and repository name
2. **Fetch repository structure** using `get_file_contents` with path="/"
3. **Filter files** based on `--focus` mode (if specified)
4. **Read file contents** for all relevant files
5. **Collect metadata**:
   - Recent commits (last 10)
   - Branch information
   - Repository description
6. **Generate markdown digest** with:
   - Repository overview
   - File tree structure
   - Key file contents
   - Technical stack analysis
   - Usage examples (from README if available)
   - Metadata and tags

## Focus Modes

**Code Focus** (`--focus code`):
- Includes: `*.js`, `*.ts`, `*.py`, `*.go`, `*.java`, `*.rb`, `*.php`, `*.rs`, `*.c`, `*.cpp`, `*.h`, `*.swift`, `*.kt`
- Excludes: Documentation, configs, build artifacts

**Docs Focus** (`--focus docs`):
- Includes: `*.md`, `*.txt`, `*.rst`, `*.adoc`, `CHANGELOG`, `LICENSE`
- Excludes: Code files, configs

**Config Focus** (`--focus config`):
- Includes: `*.json`, `*.yml`, `*.yaml`, `*.toml`, `*.ini`, `Dockerfile`, `.env.example`, `package.json`, `requirements.txt`
- Excludes: Code, documentation

**All Files** (`--focus all`, default):
- Includes everything except common excludes:
  - `node_modules/`, `.git/`, `dist/`, `build/`, `__pycache__/`
  - Binary files (detected by file extension)
  - Files larger than 1MB

## Output Format

The generated markdown file includes:

```markdown
---
title: "<Repo Name>: <Brief Description>"
tags:
  - repository
  - <detected-languages>
  - <tech-stack>
  - technical
  - inbox
url: <github-url>
date: <capture-date>
type: repository
status: inbox
priority: medium
owner: <github-owner>
visibility: <public|private>
---

# [Repository Name](github-url)

## üìñ Repository Overview
<Auto-generated description>

## üìÅ Repository Structure
<File tree>

## üîë Key Files

### <filename>
<File contents or summary>

## üõ†Ô∏è Technical Stack
<Detected technologies>

## üìä Repository Metrics
<Commits, branches, size, etc.>

## üè∑Ô∏è Tags Analysis
<Why these tags were chosen>
```

## Use Cases

- **Code Review Preparation**: Get full context before reviewing PRs
- **Architecture Analysis**: Understand project structure quickly
- **Onboarding**: Help new team members understand codebase
- **Documentation**: Generate knowledge base entries
- **AI Context**: Prepare repository context for Claude Code analysis

## Limitations

- **File Size**: Files over 1MB are summarized (not included in full)
- **Binary Files**: Images, PDFs, and other binaries are listed but not included
- **Large Repositories**: Repos with 500+ files may be sampled
- **Rate Limits**: GitHub API rate limits apply (60 req/hour unauthenticated, 5000/hour authenticated)

## Error Handling

- **404 Not Found**: Repository doesn't exist or is private (and you lack access)
- **403 Forbidden**: Rate limit exceeded or insufficient permissions
- **Invalid URL**: Provide full GitHub URL format

@include shared/research-patterns.yml#Mandatory_Research_Flows

@include shared/docs-patterns.yml#Standard_Notifications

@include shared/universal-constants.yml#Standard_Messages_Templates
